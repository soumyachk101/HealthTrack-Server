{% extends 'admin_portal/base_admin.html' %}
{% load static %}

{% block title %}Health Data | HealthTrack+{% endblock %}
{% block page_title %}Health Data Management{% endblock %}

{% block admin_content %}
<div class="admin-health-data">
    <section class="admin-stats mb-4">
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="admin-stat-card">
                    <div class="stat-icon bg-primary"><i class="fas fa-heartbeat"></i></div>
                    <h4>Health Records</h4>
                    <strong>{{ stats.total_records }}</strong>
                    <small>Total entries</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="admin-stat-card">
                    <div class="stat-icon bg-info"><i class="fas fa-pills"></i></div>
                    <h4>Medicines</h4>
                    <strong>{{ stats.total_medicines }}</strong>
                    <small>Tracked medicines</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="admin-stat-card">
                    <div class="stat-icon bg-success"><i class="fas fa-file-medical"></i></div>
                    <h4>Prescriptions</h4>
                    <strong>{{ stats.total_prescriptions }}</strong>
                    <small>Total prescriptions</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="admin-stat-card">
                    <div class="stat-icon bg-warning"><i class="fas fa-shield-alt"></i></div>
                    <h4>Insurance</h4>
                    <strong>{{ stats.total_policies }}</strong>
                    <small>Active policies</small>
                </div>
            </div>
        </div>
    </section>
    
    <section class="admin-section">
        <div class="section-header mb-4">
            <h3>Recent Health Records</h3>
        </div>
        
        <div class="table-responsive">
            <table class="table table-hover admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>User</th>
                        <th>Blood Pressure</th>
                        <th>Blood Sugar</th>
                        <th>Weight</th>
                        <th>Heart Rate</th>
                        <th>Recorded</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in records %}
                    <tr>
                        <td>{{ record.id }}</td>
                        <td>{{ record.user.get_full_name|default:record.user.username }}</td>
                        <td>{% if record.blood_pressure_systolic %}{{ record.blood_pressure_systolic }}/{{ record.blood_pressure_diastolic }} mmHg{% else %}-{% endif %}</td>
                        <td>{% if record.blood_sugar %}{{ record.blood_sugar }} mg/dL{% else %}-{% endif %}</td>
                        <td>{% if record.weight %}{{ record.weight }} kg{% else %}-{% endif %}</td>
                        <td>{% if record.heart_rate %}{{ record.heart_rate }} bpm{% else %}-{% endif %}</td>
                        <td>{{ record.recorded_at|date:"d M Y H:i" }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="text-center text-muted py-4">No health records found</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
</div>
{% endblock %}
